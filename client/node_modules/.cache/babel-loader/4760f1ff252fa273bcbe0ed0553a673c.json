{"ast":null,"code":"'use strict';\n/**\n * Module dependencies\n */\n\nvar Collection = require('./collection');\n\nvar utils = require('../utils');\n\nfunction NodeCollection(col) {\n  this.collection = col;\n  this.collectionName = col.collectionName;\n}\n/**\n * inherit from collection base class\n */\n\n\nutils.inherits(NodeCollection, Collection);\n/**\n * find(match, options, function(err, docs))\n */\n\nNodeCollection.prototype.find = function (match, options, cb) {\n  this.collection.find(match, options, function (err, cursor) {\n    if (err) return cb(err);\n\n    try {\n      cursor.toArray(cb);\n    } catch (error) {\n      cb(error);\n    }\n  });\n};\n/**\n * findOne(match, options, function(err, doc))\n */\n\n\nNodeCollection.prototype.findOne = function (match, options, cb) {\n  this.collection.findOne(match, options, cb);\n};\n/**\n * count(match, options, function(err, count))\n */\n\n\nNodeCollection.prototype.count = function (match, options, cb) {\n  this.collection.count(match, options, cb);\n};\n/**\n * distinct(prop, match, options, function(err, count))\n */\n\n\nNodeCollection.prototype.distinct = function (prop, match, options, cb) {\n  this.collection.distinct(prop, match, options, cb);\n};\n/**\n * update(match, update, options, function(err[, result]))\n */\n\n\nNodeCollection.prototype.update = function (match, update, options, cb) {\n  this.collection.update(match, update, options, cb);\n};\n/**\n * update(match, update, options, function(err[, result]))\n */\n\n\nNodeCollection.prototype.updateMany = function (match, update, options, cb) {\n  this.collection.updateMany(match, update, options, cb);\n};\n/**\n * update(match, update, options, function(err[, result]))\n */\n\n\nNodeCollection.prototype.updateOne = function (match, update, options, cb) {\n  this.collection.updateOne(match, update, options, cb);\n};\n/**\n * replaceOne(match, update, options, function(err[, result]))\n */\n\n\nNodeCollection.prototype.replaceOne = function (match, update, options, cb) {\n  this.collection.replaceOne(match, update, options, cb);\n};\n/**\n * deleteOne(match, options, function(err[, result])\n */\n\n\nNodeCollection.prototype.deleteOne = function (match, options, cb) {\n  this.collection.deleteOne(match, options, cb);\n};\n/**\n * deleteMany(match, options, function(err[, result])\n */\n\n\nNodeCollection.prototype.deleteMany = function (match, options, cb) {\n  this.collection.deleteMany(match, options, cb);\n};\n/**\n * remove(match, options, function(err[, result])\n */\n\n\nNodeCollection.prototype.remove = function (match, options, cb) {\n  this.collection.remove(match, options, cb);\n};\n/**\n * findAndModify(match, update, options, function(err, doc))\n */\n\n\nNodeCollection.prototype.findAndModify = function (match, update, options, cb) {\n  var sort = Array.isArray(options.sort) ? options.sort : [];\n  this.collection.findAndModify(match, sort, update, options, cb);\n};\n/**\n * var stream = findStream(match, findOptions, streamOptions)\n */\n\n\nNodeCollection.prototype.findStream = function (match, findOptions, streamOptions) {\n  return this.collection.find(match, findOptions).stream(streamOptions);\n};\n/**\n * var cursor = findCursor(match, findOptions)\n */\n\n\nNodeCollection.prototype.findCursor = function (match, findOptions) {\n  return this.collection.find(match, findOptions);\n};\n/**\n * aggregation(operators..., function(err, doc))\n * TODO\n */\n\n/**\n * Expose\n */\n\n\nmodule.exports = exports = NodeCollection;","map":{"version":3,"names":["Collection","require","utils","NodeCollection","col","collection","collectionName","inherits","prototype","find","match","options","cb","err","cursor","toArray","error","findOne","count","distinct","prop","update","updateMany","updateOne","replaceOne","deleteOne","deleteMany","remove","findAndModify","sort","Array","isArray","findStream","findOptions","streamOptions","stream","findCursor","module","exports"],"sources":["/Users/juliachu/Dropbox/CS/market/node_modules/mquery/lib/collection/node.js"],"sourcesContent":["'use strict';\n\n/**\n * Module dependencies\n */\n\nvar Collection = require('./collection');\nvar utils = require('../utils');\n\nfunction NodeCollection(col) {\n  this.collection = col;\n  this.collectionName = col.collectionName;\n}\n\n/**\n * inherit from collection base class\n */\n\nutils.inherits(NodeCollection, Collection);\n\n/**\n * find(match, options, function(err, docs))\n */\n\nNodeCollection.prototype.find = function(match, options, cb) {\n  this.collection.find(match, options, function(err, cursor) {\n    if (err) return cb(err);\n\n    try {\n      cursor.toArray(cb);\n    } catch (error) {\n      cb(error);\n    }\n  });\n};\n\n/**\n * findOne(match, options, function(err, doc))\n */\n\nNodeCollection.prototype.findOne = function(match, options, cb) {\n  this.collection.findOne(match, options, cb);\n};\n\n/**\n * count(match, options, function(err, count))\n */\n\nNodeCollection.prototype.count = function(match, options, cb) {\n  this.collection.count(match, options, cb);\n};\n\n/**\n * distinct(prop, match, options, function(err, count))\n */\n\nNodeCollection.prototype.distinct = function(prop, match, options, cb) {\n  this.collection.distinct(prop, match, options, cb);\n};\n\n/**\n * update(match, update, options, function(err[, result]))\n */\n\nNodeCollection.prototype.update = function(match, update, options, cb) {\n  this.collection.update(match, update, options, cb);\n};\n\n/**\n * update(match, update, options, function(err[, result]))\n */\n\nNodeCollection.prototype.updateMany = function(match, update, options, cb) {\n  this.collection.updateMany(match, update, options, cb);\n};\n\n/**\n * update(match, update, options, function(err[, result]))\n */\n\nNodeCollection.prototype.updateOne = function(match, update, options, cb) {\n  this.collection.updateOne(match, update, options, cb);\n};\n\n/**\n * replaceOne(match, update, options, function(err[, result]))\n */\n\nNodeCollection.prototype.replaceOne = function(match, update, options, cb) {\n  this.collection.replaceOne(match, update, options, cb);\n};\n\n/**\n * deleteOne(match, options, function(err[, result])\n */\n\nNodeCollection.prototype.deleteOne = function(match, options, cb) {\n  this.collection.deleteOne(match, options, cb);\n};\n\n/**\n * deleteMany(match, options, function(err[, result])\n */\n\nNodeCollection.prototype.deleteMany = function(match, options, cb) {\n  this.collection.deleteMany(match, options, cb);\n};\n\n/**\n * remove(match, options, function(err[, result])\n */\n\nNodeCollection.prototype.remove = function(match, options, cb) {\n  this.collection.remove(match, options, cb);\n};\n\n/**\n * findAndModify(match, update, options, function(err, doc))\n */\n\nNodeCollection.prototype.findAndModify = function(match, update, options, cb) {\n  var sort = Array.isArray(options.sort) ? options.sort : [];\n  this.collection.findAndModify(match, sort, update, options, cb);\n};\n\n/**\n * var stream = findStream(match, findOptions, streamOptions)\n */\n\nNodeCollection.prototype.findStream = function(match, findOptions, streamOptions) {\n  return this.collection.find(match, findOptions).stream(streamOptions);\n};\n\n/**\n * var cursor = findCursor(match, findOptions)\n */\n\nNodeCollection.prototype.findCursor = function(match, findOptions) {\n  return this.collection.find(match, findOptions);\n};\n\n/**\n * aggregation(operators..., function(err, doc))\n * TODO\n */\n\n/**\n * Expose\n */\n\nmodule.exports = exports = NodeCollection;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}