{"ast":null,"code":"/*!\n * Module dependencies.\n */\n'use strict';\n\nconst NodeJSDocument = require('./document');\n\nconst EventEmitter = require('events').EventEmitter;\n\nconst MongooseError = require('./error/index');\n\nconst Schema = require('./schema');\n\nconst ObjectId = require('./types/objectid');\n\nconst ValidationError = MongooseError.ValidationError;\n\nconst applyHooks = require('./helpers/model/applyHooks');\n\nconst isObject = require('./helpers/isObject');\n/**\n * Document constructor.\n *\n * @param {Object} obj the values to set\n * @param {Object} [fields] optional object containing the fields which were selected in the query returning this document and any populated paths data\n * @param {Boolean} [skipId] bool, should we auto create an ObjectId _id\n * @inherits NodeJS EventEmitter http://nodejs.org/api/events.html#events_class_events_eventemitter\n * @event `init`: Emitted on a document after it has was retrieved from the db and fully hydrated by Mongoose.\n * @event `save`: Emitted when the document is successfully saved\n * @api private\n */\n\n\nfunction Document(obj, schema, fields, skipId, skipInit) {\n  if (!(this instanceof Document)) {\n    return new Document(obj, schema, fields, skipId, skipInit);\n  }\n\n  if (isObject(schema) && !schema.instanceOfSchema) {\n    schema = new Schema(schema);\n  } // When creating EmbeddedDocument, it already has the schema and he doesn't need the _id\n\n\n  schema = this.schema || schema; // Generate ObjectId if it is missing, but it requires a scheme\n\n  if (!this.schema && schema.options._id) {\n    obj = obj || {};\n\n    if (obj._id === undefined) {\n      obj._id = new ObjectId();\n    }\n  }\n\n  if (!schema) {\n    throw new MongooseError.MissingSchemaError();\n  }\n\n  this.$__setSchema(schema);\n  NodeJSDocument.call(this, obj, fields, skipId, skipInit);\n  applyHooks(this, schema, {\n    decorateDoc: true\n  }); // apply methods\n\n  for (const m in schema.methods) {\n    this[m] = schema.methods[m];\n  } // apply statics\n\n\n  for (const s in schema.statics) {\n    this[s] = schema.statics[s];\n  }\n}\n/*!\n * Inherit from the NodeJS document\n */\n\n\nDocument.prototype = Object.create(NodeJSDocument.prototype);\nDocument.prototype.constructor = Document;\n/*!\n * ignore\n */\n\nDocument.events = new EventEmitter();\n/*!\n * Browser doc exposes the event emitter API\n */\n\nDocument.$emitter = new EventEmitter();\n['on', 'once', 'emit', 'listeners', 'removeListener', 'setMaxListeners', 'removeAllListeners', 'addListener'].forEach(function (emitterFn) {\n  Document[emitterFn] = function () {\n    return Document.$emitter[emitterFn].apply(Document.$emitter, arguments);\n  };\n});\n/*!\n * Module exports.\n */\n\nDocument.ValidationError = ValidationError;\nmodule.exports = exports = Document;","map":{"version":3,"names":["NodeJSDocument","require","EventEmitter","MongooseError","Schema","ObjectId","ValidationError","applyHooks","isObject","Document","obj","schema","fields","skipId","skipInit","instanceOfSchema","options","_id","undefined","MissingSchemaError","$__setSchema","call","decorateDoc","m","methods","s","statics","prototype","Object","create","constructor","events","$emitter","forEach","emitterFn","apply","arguments","module","exports"],"sources":["/Users/juliachu/Dropbox/CS/market/node_modules/mongoose/lib/browserDocument.js"],"sourcesContent":["/*!\n * Module dependencies.\n */\n\n'use strict';\n\nconst NodeJSDocument = require('./document');\nconst EventEmitter = require('events').EventEmitter;\nconst MongooseError = require('./error/index');\nconst Schema = require('./schema');\nconst ObjectId = require('./types/objectid');\nconst ValidationError = MongooseError.ValidationError;\nconst applyHooks = require('./helpers/model/applyHooks');\nconst isObject = require('./helpers/isObject');\n\n/**\n * Document constructor.\n *\n * @param {Object} obj the values to set\n * @param {Object} [fields] optional object containing the fields which were selected in the query returning this document and any populated paths data\n * @param {Boolean} [skipId] bool, should we auto create an ObjectId _id\n * @inherits NodeJS EventEmitter http://nodejs.org/api/events.html#events_class_events_eventemitter\n * @event `init`: Emitted on a document after it has was retrieved from the db and fully hydrated by Mongoose.\n * @event `save`: Emitted when the document is successfully saved\n * @api private\n */\n\nfunction Document(obj, schema, fields, skipId, skipInit) {\n  if (!(this instanceof Document)) {\n    return new Document(obj, schema, fields, skipId, skipInit);\n  }\n\n  if (isObject(schema) && !schema.instanceOfSchema) {\n    schema = new Schema(schema);\n  }\n\n  // When creating EmbeddedDocument, it already has the schema and he doesn't need the _id\n  schema = this.schema || schema;\n\n  // Generate ObjectId if it is missing, but it requires a scheme\n  if (!this.schema && schema.options._id) {\n    obj = obj || {};\n\n    if (obj._id === undefined) {\n      obj._id = new ObjectId();\n    }\n  }\n\n  if (!schema) {\n    throw new MongooseError.MissingSchemaError();\n  }\n\n  this.$__setSchema(schema);\n\n  NodeJSDocument.call(this, obj, fields, skipId, skipInit);\n\n  applyHooks(this, schema, { decorateDoc: true });\n\n  // apply methods\n  for (const m in schema.methods) {\n    this[m] = schema.methods[m];\n  }\n  // apply statics\n  for (const s in schema.statics) {\n    this[s] = schema.statics[s];\n  }\n}\n\n/*!\n * Inherit from the NodeJS document\n */\n\nDocument.prototype = Object.create(NodeJSDocument.prototype);\nDocument.prototype.constructor = Document;\n\n/*!\n * ignore\n */\n\nDocument.events = new EventEmitter();\n\n/*!\n * Browser doc exposes the event emitter API\n */\n\nDocument.$emitter = new EventEmitter();\n\n['on', 'once', 'emit', 'listeners', 'removeListener', 'setMaxListeners',\n  'removeAllListeners', 'addListener'].forEach(function(emitterFn) {\n  Document[emitterFn] = function() {\n    return Document.$emitter[emitterFn].apply(Document.$emitter, arguments);\n  };\n});\n\n/*!\n * Module exports.\n */\n\nDocument.ValidationError = ValidationError;\nmodule.exports = exports = Document;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}